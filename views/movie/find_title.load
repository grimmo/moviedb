{{'''
# License: Public Domain
# Author: Iceberg at 21cn dot com

With this generic.load file, you can use same function to serve two purposes.

= regular action
- ajax callback (when called with .load)

Example modified from http://www.web2py.com/AlterEgo/default/show/252:

def index():
    return dict(
		part1='hello world',
        	part2=LOAD(url=URL(r=request,f='auxiliary.load'),ajax=True))

def auxiliary():
    form=SQLFORM.factory(Field('name'))
    if form.accepts(request.vars):
        response.flash = 'ok' 
        return dict(message="Hello %s" % form.vars.name)
    return dict(form=form)

Notice:

- no need to set response.headers['web2py-response-flash']
- no need to return a string
even if the function is called via ajax.

'''}}
<h4 class="modal-title">
{{ =T('Seleziona il titolo che corrisponde a questo film') }}
</h4>
{{ if risultati: }}
<span class="titolitrovati">
    <ul class="list-unstyled">
    {{ for risultato in risultati: }}
        <li>{{ = A("%s (%s)" % (risultato['titolo'],risultato['anno']),_href="fetch_new.load?tmdb_id=%s" % risultato['tmdb_id'])}}</li>
    {{ pass }}
    </ul>
</span>
{{ else: }}
<h1>Inserisci titolo da cercare</h1>
<span class="titolitrovati">
{{ = form }}
</span>
{{ pass }}
